webpackJsonp([26],{668:function(e,o,a){a(834);var t=a(34)(a(758),a(900),"data-v-2f8934fd",null);t.options.__file="D:\\dongwei\\code\\daily-coding-vue\\src\\views\\books\\books-page.vue",t.esModule&&Object.keys(t.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),t.options.functional&&console.error("[vue-loader] books-page.vue: functional components are not supported with templates, they should use render functions."),e.exports=t.exports},758:function(e,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=a(101),n=function(e){return e&&e.__esModule?e:{default:e}}(t);o.default={name:"books",data:function(){var e=this;return{addBookData:{bookName:"",bookPageNumber:""},bookInfo:[],readingData:{bookName:"",bookPageNumberS:"",bookPageNumberE:""},reviewInfo:[],reviewColumns:[{title:"书名",key:"bookName"},{title:"页码",render:function(e,o){return o.row.bookPageNumberS+"-"+o.row.bookPageNumberE}},{title:"操作",align:"center",render:function(o,a){return o("div",[o("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.checkReview(a.index)}}},"已复习")])}}],booksColumns:[{title:"书名",key:"bookName"},{title:"进度",render:function(e,o){return e("div",[e("Progress",{props:{status:"active",percent:parseInt(o.row.progress)}})])}},{title:"操作",align:"center",render:function(o,a){return o("div",[o("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteBook(a.index)}}},"删除")])}}]}},mounted:function(){this.queryBookInfo(),this.queryReviewInfo()},methods:{addBook:function(){var e=this,o={bookName:e.addBookData.bookName,bookPageNumber:e.addBookData.bookPageNumber};return o.bookName?o.bookPageNumber?/^[1-9]\d*$/g.test(o.bookPageNumber)?void n.default.post("http://localhost:3000/book/addBook",o).then(function(o){1===o.data.state?e.$Message.success("新增成功！"):0===o.data.state?e.$Message.error("新增失败！"):2===o.data.state?e.$Message.warning("不得增加重复书籍！"):console.log(o)}).catch(function(o){console.log(o),e.$Message.error("服务器错误！")}):(e.$Message.warning("页数只能为正整数！"),!1):(e.$Message.warning("页数不能为空！"),!1):(e.$Message.warning("书名不能为空！"),!1)},addRead:function(){var e=this,o={bookName:e.readingData.bookName,bookPageNumberS:e.readingData.bookPageNumberS,bookPageNumberE:e.readingData.bookPageNumberE};if(!o.bookName)return e.$Message.warning("书名不能为空！"),!1;if(!o.bookPageNumberS||!o.bookPageNumberE)return e.$Message.warning("页数不能为空！"),!1;if(!/^[1-9]\d*$/g.test(o.bookPageNumberS)||!/^[1-9]\d*$/g.test(o.bookPageNumberE))return e.$Message.warning("页数只能为正整数！"),!1;for(var a in e.bookInfo)if(e.bookInfo[a].bookName===o.bookName&&(o.bookPageNumber=e.bookInfo[a].bookPageNumber,parseInt(o.bookPageNumberE)>parseInt(e.bookInfo[a].bookPageNumber)||parseInt(o.bookPageNumberS)>parseInt(e.bookInfo[a].bookPageNumber)))return e.$Message.warning("页数最大为"+e.bookInfo[a].bookPageNumber+"！"),!1;n.default.post("http://localhost:3000/book/addReading",o).then(function(o){1===o.data.state?e.$Message.success("新增成功！"):0===o.data.state?e.$Message.error("新增失败！"):console.log(o)}).catch(function(o){console.log(o),e.$Message.error("服务器错误！")})},queryBookInfo:function(){var e=this;n.default.get("http://localhost:3000/book/queryBookInfo").then(function(o){0===o.data.state?e.$Message.error("获取书籍信息失败！"):e.bookInfo=o.data}).catch(function(o){console.log(o),e.$Message.error("服务器错误！")})},queryReviewInfo:function(){var e=this;n.default.get("http://localhost:3000/book/queryReviewInfo").then(function(o){0===o.data.state?e.$Message.error("获取复习信息失败！"):e.reviewInfo=o.data}).catch(function(o){console.log(o),e.$Message.error("获取复习信息失败！")})},checkReview:function(e){var o=this,a=o.reviewInfo[e];n.default.post("http://localhost:3000/book/checkReview",a).then(function(e){0===e.data.state?o.$Message.error("更新复习信息失败！"):(o.$Message.success("更新复习信息成功！"),o.queryReviewInfo())}).catch(function(e){console.log(e),o.$Message.error("更新复习信息失败！")})},deleteBook:function(e){var o=this,a=o.bookInfo[e];n.default.post("http://localhost:3000/book/deleteBook",a).then(function(e){0===e.data.state?o.$Message.error("删除书籍失败！"):(o.$Message.success("删除书籍成功！"),o.queryBookInfo())}).catch(function(e){console.log(e),o.$Message.error("删除书籍失败！")})}}}},834:function(e,o){},900:function(e,o,a){e.exports={render:function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",[a("div",{staticClass:"fn-left clearfix"},[a("div",{staticClass:"fn-reading"},[a("Card",{staticClass:"reading clearfix"},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-book"}}),e._v("\n                    今日已读\n                ")],1),e._v(" "),a("Select",{model:{value:e.readingData.bookName,callback:function(o){e.$set(e.readingData,"bookName",o)},expression:"readingData.bookName"}},e._l(e.bookInfo,function(o){return a("Option",{key:o.bookName,attrs:{value:o.bookName}},[e._v(e._s(o.bookName))])})),e._v(" "),a("Input",{staticClass:"reading-input",attrs:{placeholder:"起始页"},model:{value:e.readingData.bookPageNumberS,callback:function(o){e.$set(e.readingData,"bookPageNumberS",o)},expression:"readingData.bookPageNumberS"}}),e._v(" "),a("Input",{staticClass:"reading-input",attrs:{placeholder:"结束页"},model:{value:e.readingData.bookPageNumberE,callback:function(o){e.$set(e.readingData,"bookPageNumberE",o)},expression:"readingData.bookPageNumberE"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.addRead}},[e._v("确认")])],1)],1),e._v(" "),a("div",{staticClass:"fn-addBook"},[a("Card",{staticClass:"reading clearfix"},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"android-add-circle"}}),e._v("\n                    新增书籍\n                ")],1),e._v(" "),a("Input",{attrs:{placeholder:"输入书籍名称"},model:{value:e.addBookData.bookName,callback:function(o){e.$set(e.addBookData,"bookName",o)},expression:"addBookData.bookName"}}),e._v(" "),a("Input",{attrs:{placeholder:"输入书籍页码"},model:{value:e.addBookData.bookPageNumber,callback:function(o){e.$set(e.addBookData,"bookPageNumber",o)},expression:"addBookData.bookPageNumber"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.addBook}},[e._v("确认")])],1)],1),e._v(" "),a("div",{staticClass:"fn-books-table"},[a("Card",{staticClass:"books-table clearfix"},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"flag"}}),e._v("\n                    读书进度\n                ")],1),e._v(" "),a("Table",{attrs:{columns:e.booksColumns,data:e.bookInfo}})],1)],1)]),e._v(" "),a("div",{staticClass:"fn-right"},[a("Card",{staticClass:"review-table clearfix"},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"bookmark"}}),e._v("\n                    今日待复习\n                ")],1),e._v(" "),a("Table",{attrs:{columns:e.reviewColumns,data:e.reviewInfo}})],1)],1)])},staticRenderFns:[]},e.exports.render._withStripped=!0}});